import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Date;

import com.biotools.meerkat.GameObserver;

import bots.BotRepository;
import game.GameIDGenerator;
import game.GameRunner;
import game.TableSeater;
import game.cash.CashGameDescription;
import game.cash.CashGameTableSeater;
import game.deck.DeckFactory;
import game.deck.RandomDeck;
import game.stats.BankrollGraphUI;

public class MultiThreadedCashGameConsoleStarter {

	public static void main(String[] args) {
        // number of games
        int numGames = 50000;
        // if to permute seats to reduce variance
        boolean permuteSeats = false;
        // six Bots fight against each other
        // valid BotNames can be obtained from the botRepository
        String[] botNames = new String[]{"DemoBot/SimpleBot", "DemoBot/SimpleBot", "SmarterBot/SmarterBot", "DemoBot/SimpleBot", "DemoBot/SimpleBot", "DemoBot/SimpleBot"};

        BotRepository botRepository = new BotRepository();
        TableSeater tableSeater = new CashGameTableSeater(botRepository, permuteSeats);
        GameIDGenerator gameIDGenerator = new GameIDGenerator(System.nanoTime());

        // in the future created via GUI, and persisted via XML to the ./data/games dir
        CashGameDescription cashGameDescription = new CashGameDescription();
        cashGameDescription.setSmallBlind(0.01);
        cashGameDescription.setBigBlind(0.02);
        cashGameDescription.setInitialBankRoll(2);
        cashGameDescription.setNumGames(numGames);
        cashGameDescription.setBotNames(botNames);

        // start the game
        GameRunner runner = cashGameDescription.createMultiThreadedGameRunner();
        BankrollGraphUI bankrollgraphUI = new BankrollGraphUI();
        runner.addBankrollObserver(bankrollgraphUI);
        DeckFactory deckFactory = RandomDeck.createFactory();
        runner.runGame(deckFactory, tableSeater, gameIDGenerator, new ArrayList<GameObserver>());
        
        bankrollgraphUI.createGraph(new SimpleDateFormat("yyMMdd-HHmm").format(new Date()));

	}
	

}
